{% extends "base.html" %}
{% load static %}

<title>{% block title %}KBG Europe â€“ Korean BBQ Grill{% endblock %}</title>

{% block content %}
<style>
  :root {
    --kbg-orange: #f28c1a;
    --kbg-green: #2c7c4f;
    --kbg-text: #222;
    --kbg-muted: #666;
    --kbg-bg-light: #f5f5f0;
    --kbg-max-width: 1200px;
    --kbg-font-main: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;

    /* NEU: Standard-Streifenfarben */
    --kbg-block-white: #ffffff;
    --kbg-block-beige: #f5f5f0;
  }



  .kbg-menu-page {
    font-family: var(--kbg-font-main);
    color: var(--kbg-text);
  }

  /* Hero Ramyun oben */
  .kbg-hero {
    position: relative;
    color: #fff;
    overflow: hidden;
  }

  .kbg-hero-media {
    width: 100%;
    height: 320px;
    object-fit: cover;
    display: block;
  }

  .kbg-hero-overlay {
    position: absolute;
    inset: 0;
    background: linear-gradient(
      to bottom,
      rgba(0, 0, 0, 0.35),
      rgba(0, 0, 0, 0.6)
    );
    display: flex;
    align-items: center;
    justify-content: center;
    flex-direction: column;
    text-align: center;
    padding: 1rem;
  }

  .kbg-hero-title {
    font-size: clamp(2rem, 3vw, 2.8rem);
    font-weight: 700;
    margin-bottom: 0.3rem;
  }

  .kbg-hero-subtitle {
    font-size: 1rem;
    opacity: 0.9;
  }

  .kbg-main {
    max-width: var(--kbg-max-width);
    margin: 0 auto;
    padding: 3rem 1.5rem 4rem;
  }

  .kbg-section-intro {
    text-align: center;
    margin-bottom: 2.5rem;
  }

  .kbg-section-intro small {
    color: var(--kbg-green);
    font-weight: 600;
    letter-spacing: 0.05em;
    text-transform: uppercase;
    display: block;
    margin-bottom: 0.4rem;
  }

  .kbg-section-intro h1 {
    font-size: clamp(1.8rem, 3vw, 2.4rem);
    margin-bottom: 0.4rem;
  }

  .kbg-section-intro p {
    color: var(--kbg-muted);
    font-size: 0.95rem;
  }

  /* MenÃ¼-BlÃ¶cke */

  .kbg-menu-block {
    display: grid;
    grid-template-columns: minmax(0, 1.1fr) minmax(0, 1.2fr);
    gap: 2.5rem;
    padding: 2.5rem 2rem;
    margin-bottom: 1.5rem;
    align-items: center;
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    position: relative;
  }

  .kbg-menu-block-inner {
    position: relative;
    z-index: 1;
  }

  .kbg-menu-block img.kbg-dish-image {
    width: 100%;
    max-width: 420px;
    border-radius: 8px;
    display: block;
    box-shadow: 0 12px 30px rgba(0, 0, 0, 0.15);
  }

  .kbg-dish-header {
    margin-bottom: 0.5rem;
  }

  .kbg-dish-id {
    color: var(--kbg-orange);
    font-weight: 700;
    font-size: 1.6rem;
    margin-right: 0.4rem;
  }

  .kbg-dish-name {
    font-size: 1.6rem;
    font-weight: 700;
  }

  .kbg-dish-subtitle {
    color: var(--kbg-muted);
    font-weight: 500;
    margin-bottom: 0.7rem;
  }

  .kbg-dish-description {
    margin-bottom: 0.4rem;
  }

  .kbg-dish-description .en {
    font-style: italic;
    color: var(--kbg-muted);
    font-size: 0.9rem;
  }

  .kbg-options-list {
    margin-top: 0.75rem;
    font-size: 0.95rem;
  }

  .kbg-option-item {
    margin-bottom: 0.2rem;
  }

  /* 1A / 1B / 11A / 11B etc â€“ Orange + italic */
  .kbg-option-code {
    color: var(--kbg-orange);
    font-style: italic;
    font-weight: 600;
    margin-right: 0.3rem;
  }

  .kbg-option-label span.icon {
    margin-left: 0.2rem;
  }

  /* Overlay bei Hintergrundbildern */
  .kbg-menu-block.has-bg-image::before {
    content: "";
    position: absolute;
    inset: 0;
    background: linear-gradient(
      to right,
      rgba(255, 255, 255, 0.92),
      rgba(255, 255, 255, 0.97)
    );
    z-index: 0;
  }

  @media (max-width: 900px) {
    .kbg-menu-block {
      grid-template-columns: 1fr;
      padding: 2rem 1.5rem;
    }
    .kbg-hero-media {
      height: 240px;
    }
  }

  @media (max-width: 600px) {
    .kbg-main {
      padding-inline: 1rem;
    }
    .kbg-menu-block {
      padding-inline: 1rem;
    }
  }
</style>

<div class="kbg-menu-page">

  <!-- Hero-Ramyun (Navbar und Footer kommen schon aus base.html) -->
  <section class="kbg-hero">
    <img
      src="{% static 'img/menu/ramyun-hero.jpg' %}"
      alt="Ramyun"
      class="kbg-hero-media"
    />
    <div class="kbg-hero-overlay">
      <div class="kbg-hero-title">Ramyun</div>
      <div class="kbg-hero-subtitle">Lieblingsgericht weltweit</div>
    </div>
  </section>

  <main class="kbg-main">
    <section class="kbg-section-intro">
      <small>Unser MenÃ¼</small>
      <h1>GenieÃŸen Sie die koreanische Vielfalt</h1>
      <p>Unsere Speisen werden tÃ¤glich frisch zubereitet!</p>
    </section>

    <div id="kbg-menu-container"></div>
  </main>

</div>

<script>
  // MenÃ¼-Daten â€“ jedes Objekt ist ein Block
  // background: optional
  //  - weggelassen  -> automatische Streifen (weiÃŸ / beige)
  //  - "#xxxxxx"    -> feste Farbe fÃ¼r diesen Block
  //  - "irgendwas.jpg" -> Hintergrundbild

  const kbgMenuData = [
    {
      id: 1,
      name: "Bibimbap Bowl",
      subtitle: "Bekanntestes koreanisches Gericht",
      descriptionDe: "Reis, frisches GemÃ¼se, Spiegelei, 1 Topping nach Wahl",
      descriptionEn: "rice, fresh vegetables, fried egg, 1 topping of your choice",
      image: "{% static 'img/menu/1-bibimbap.jpg' %}",
      // background: weggelassen -> nimmt automatisch weiÃŸ (erster Block)
      options: [
        { code: "1A", label: "Bulgogi Beef" },
        { code: "1B", label: "Teriyaki Lachs" },
        { code: "1C", label: "Jeyuk Pork ðŸŒ¶" },
        { code: "1D", label: "Chicken" },
        { code: "1E", label: "Tofu ðŸŒ±" }
      ]
    },
    {
      id: 2,
      name: "BBQ Bowl",
      subtitle: "Schmackhaft â€¢ Gesund â€¢ Frisch",
      descriptionDe: "Reis, GemÃ¼sestreifen, Fleisch nach Wahl",
      descriptionEn: "rice, vegetable stripes, meat of your choice",
      image: "{% static 'img/menu/2-bbq-bowl.jpg' %}",
      // background: weggelassen -> nimmt automatisch beige (zweiter Block)
      options: [
        { code: "2A", label: "Bulgogi Beef" },
        { code: "2B", label: "Jeyuk Pork ðŸŒ¶" },
        { code: "2C", label: "Chicken" }
      ]
    },
    {
      id: 3,
      name: "Chapchae",
      subtitle: "Festessen tÃ¤glich genieÃŸen",
      descriptionDe: "Glasnudel mit frischem GemÃ¼se und 1 Topping nach Wahl",
      descriptionEn: "glass noodle with fresh vegetables and 1 topping of your choice",
      image: "{% static 'img/menu/3-chapchae.jpg' %}",
      // Beispiel mit Bild-Hintergrund
      background: "{% static 'img/menu/bg-chapchae.jpg' %}",
      options: [
        { code: "3A", label: "Bulgogi Beef" },
        { code: "3B", label: "Jeyuk Pork ðŸŒ¶" },
        { code: "3C", label: "Chicken" },
        { code: "3D", label: "Tofu ðŸŒ±" },
        { code: "3E", label: "Ohne Extra ðŸŒ±" }
      ]
    },
    {
      id: 4,
      name: "Ramyun Soup Bowl",
      subtitle: "Leibgericht fÃ¼r jung & alt",
      descriptionDe: "Nudelsuppe mit frischem GemÃ¼se und Ei, 1 Topping nach Wahl",
      descriptionEn: "noodle soup with fresh vegetables and egg, 1 topping of your choice",
      image: "{% static 'img/menu/4-ramyun-soup.jpg' %}",
      // background: "#f5f5f0",  // Beispiel: feste Farbe, wenn du willst
      options: [
        { code: "4A", label: "Mandu ðŸŒ±" },
        { code: "4B", label: "KÃ¤se" },
        { code: "4C", label: "Kimchi ðŸŒ¶" },
        { code: "4D", label: "Fleisch nach Wahl" },
        { code: "4E", label: "Ohne Extra ðŸŒ±" }
      ]
    },
    {
      id: 11,
      name: "KBG-Deluxe",
      subtitle: "Kleines Kulturerlebnis",
      descriptionDe:
        "Gimbap, frittierte Mandu, Chapchae, Salat, Reis, Miso-Suppe, Fleisch nach Wahl (oder Tofu)",
      descriptionEn:
        "gimbap, fried mandu, chapchae, salad, rice, miso soup, 1 meat of your choice (or tofu)",
      image: "{% static 'img/menu/11-kbg-deluxe.jpg' %}",
      background: "#e5dfcf",  // hier z.B. spezieller Beige-Ton
      options: [
        { code: "11A", label: "Bulgogi Beef" },
        { code: "11B", label: "Jeyuk Pork ðŸŒ¶" },
        { code: "11C", label: "Chicken" },
        { code: "11D", label: "Tofu ðŸŒ±" },
        { code: "11E", label: "Ohne Extra ðŸŒ±" }
      ]
    }
  ];

  const kbgMenuContainer = document.getElementById("kbg-menu-container");

  function createMenuBlock(item, index) {
    const block = document.createElement("section");
    block.className = "kbg-menu-block";

    // Default: Streifen weiÃŸ / beige
    let bgColor = index % 2 === 0
      ? "var(--kbg-block-white)"
      : "var(--kbg-block-beige)";

    let hasImage = false;

    // Wenn background gesetzt ist:
    if (item.background) {
      if (
        item.background.startsWith("#") ||
        item.background.startsWith("rgb")
      ) {
        // explizite Farbe im JSON Ã¼berschreibt Standard-Streifenfarbe
        bgColor = item.background;
      } else {
        // sonst behandeln wir es als Bild-URL
        hasImage = true;
      }
    }

    // Farbe setzen
    block.style.backgroundColor = bgColor;

    // Hintergrundbild + Overlay (wie vorher)
    if (hasImage) {
      block.classList.add("has-bg-image");
      block.style.backgroundImage = `url('${item.background}')`;
    }

    const imageWrapper = document.createElement("div");
    imageWrapper.className = "kbg-menu-block-inner";
    const img = document.createElement("img");
    img.src = item.image;
    img.alt = item.name;
    img.className = "kbg-dish-image";
    imageWrapper.appendChild(img);

    const textWrapper = document.createElement("div");
    textWrapper.className = "kbg-menu-block-inner";

    const header = document.createElement("div");
    header.className = "kbg-dish-header";

    const idSpan = document.createElement("span");
    idSpan.className = "kbg-dish-id";
    idSpan.textContent = item.id;

    const nameSpan = document.createElement("span");
    nameSpan.className = "kbg-dish-name";
    nameSpan.textContent = " " + item.name;

    header.appendChild(idSpan);
    header.appendChild(nameSpan);

    const subtitle = document.createElement("div");
    subtitle.className = "kbg-dish-subtitle";
    subtitle.textContent = item.subtitle || "";

    const desc = document.createElement("div");
    desc.className = "kbg-dish-description";
    desc.innerHTML = `
      ${item.descriptionDe || ""}<br/>
      <span class="en">${item.descriptionEn || ""}</span>
    `;

    textWrapper.appendChild(header);
    textWrapper.appendChild(subtitle);
    textWrapper.appendChild(desc);

    if (item.options && item.options.length) {
      const optionsList = document.createElement("div");
      optionsList.className = "kbg-options-list";

      item.options.forEach((opt) => {
        const line = document.createElement("div");
        line.className = "kbg-option-item";

        const code = document.createElement("span");
        code.className = "kbg-option-code";
        code.textContent = opt.code;

        const label = document.createElement("span");
        label.className = "kbg-option-label";
        label.textContent = " " + opt.label;

        line.appendChild(code);
        line.appendChild(label);
        optionsList.appendChild(line);
      });

      textWrapper.appendChild(optionsList);
    }

    block.appendChild(imageWrapper);
    block.appendChild(textWrapper);

    return block;
  }

  kbgMenuData.forEach((item, index) => {
    const block = createMenuBlock(item, index);
    kbgMenuContainer.appendChild(block);
  });
</script>

{% endblock %}
