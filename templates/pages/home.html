{% extends "base.html" %}

{% block title %}KBG Europe – Korean BBQ Grill{% endblock %}

{% load static %}
{% load media_tags %}

{% block content %}

<!-- Fonts laden (Julee & Outfit) -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Julee&family=Outfit:wght@100..900&display=swap" rel="stylesheet">

<!-- ========== HERO SECTION ========== -->
<section class="hero-section">
    <div class="hero-bg">
        <img src="{% site_image_url 'home_hero' 'img/hero-placeholder.jpg' %}"
             alt="{% site_image_alt 'home_hero' 'KBG Hero' %}">
    </div>
    <div class="hero-overlay">
        <!-- Animationen per CSS definiert (siehe unten) -->
        <h1 class="hero-text-julee anim-1">So schmeckt zusammen</h1>
        <h2 class="hero-text-korean anim-2">다함께 맛있게</h2>
        <p class="hero-text-pronounce anim-3">[ Tahamggae Maschigge ]</p>
        <p class="hero-text-julee anim-4">The Taste of Together</p>
    </div>
</section>

<!-- ========== WER WIR SIND (mit Sliding-Slider) ========== -->
<section class="section section-light" id="about-section">
    <!-- align-items: center sorgt für vertikale Zentrierung -->
    <div class="container two-column" style="align-items: center;">
        <div class="col">
            <h3 class="section-kicker">KBG-Bonn</h3>
            <h2 class="section-title">Wer wir sind</h2>
            <p>KBG ist ein schnelles Casual-Restaurant im Herzen von Bonn. Direkt am Bonn Hauptbahnhof im Maximilian Center.</p>
            <p>Zu jeder Zeit gibt es viele Angebote und Geschenke für Sie. Kommen Sie vorbei und erleben Sie die gesunde und frische koreanische Küche.</p>
            <p>Sie finden uns unten im Maximilian Center zwischen U-Bahnsteig und Busbahnhof.</p>

            <a href="{% url 'kontakt' %}" class="btn btn-primary">Finden Sie uns hier</a>
        </div>

        <!-- Rechter Bereich: Slider Window -->
        <div class="col about-slider-window">
            <!-- Der Track bewegt sich -->
            <div class="about-slider-track" id="aboutSliderTrack">

                <!-- Bild 1 -->
                <div class="about-slide-item">
                    <img class="rounded-img"
                         src="{% site_image_url 'home_about_image' 'img/section-placeholder.jpg' %}"
                         alt="{% site_image_alt 'home_about_image' 'Maximilian Center' %}">
                </div>

                <!-- Bild 2 -->
                <div class="about-slide-item">
                    {% if site_images.home_about_image_2 and site_images.home_about_image_2.image %}
                        <img class="rounded-img"
                             src="{{ site_images.home_about_image_2.image.url }}"
                             alt="{{ site_images.home_about_image_2.alt_text }}">
                    {% else %}
                        <!-- Fallback -->
                        <img class="rounded-img"
                             src="{% site_image_url 'home_about_image' 'img/section-placeholder.jpg' %}"
                             alt="Interior View Placeholder">
                    {% endif %}
                </div>

            </div>
        </div>
    </div>
</section>

<!-- ========== MENÜ (Split Layout 25/50/25) - HTML FÜR RESPONSIVEN SLIDER ERWEITERT ========== -->
<section class="section section-white">
    <!-- Desktop: 25/50/25 -->
    <div class="container menu-split-layout">

        <!-- Links: 25% (Nur Desktop/Groß) -->
        <div class="menu-side-img menu-img-1">
            <img src="{% site_image_url 'home_menu_1' 'img/section-placeholder.jpg' %}"
                 alt="{% site_image_alt 'home_menu_1' 'Gericht 1' %}"
                 class="rounded-img full-height-img">
        </div>

        <!-- Mitte: 50% Text -->
        <div class="menu-center-text section-center">
            <h3 class="section-kicker">Menü</h3>
            <h2 class="section-title">Genießen Sie die koreanische Vielfalt</h2>
            <p>Unsere Speisen werden täglich frisch zubereitet. Entdecken Sie die Vielfalt von Bibimbap, Bulgogi und vielem mehr.</p>
            <br>
            <a href="{% url 'menu' %}" class="btn btn-primary">Entdecken Sie unser Menü</a>
        </div>

        <!-- Rechts: 25% (Nur Desktop/Groß) -->
        <div class="menu-side-img menu-img-2">
            <img src="{% site_image_url 'home_menu_2' 'img/section-placeholder.jpg' %}"
                 alt="{% site_image_alt 'home_menu_2' 'Gericht 2' %}"
                 class="rounded-img full-height-img">
        </div>

    </div>

    <!-- NEUER BEREICH: Menü für Tablet (2 Bilder) und Mobile (Slider) -->
    <div class="container menu-responsive-container">

        <!-- NEU: Textblock – identisch wie oben, aber für Tablet & Mobile -->
        <div class="menu-center-text section-center menu-responsive-text">
            <h3 class="section-kicker">Menü</h3>
            <h2 class="section-title">Genießen Sie die koreanische Vielfalt</h2>
            <p>Unsere Speisen werden täglich frisch zubereitet. Entdecken Sie die Vielfalt von Bibimbap, Bulgogi und vielem mehr.</p>
            <br>
            <a href="{% url 'menu' %}" class="btn btn-primary">Entdecken Sie unser Menü</a>
        </div>

        <!-- Slider / Bilder -->
        <div class="menu-mobile-slider" id="menuSlider">
            <!-- Die einzelnen Bilder für den Slider -->
            <div class="menu-slider-track" id="menuSliderTrack">
                <div class="menu-slide-item">
                     <img src="{% site_image_url 'home_menu_1' 'img/section-placeholder.jpg' %}"
                         alt="{% site_image_alt 'home_menu_1' 'Gericht 1' %}"
                         class="rounded-img">
                </div>
                <div class="menu-slide-item">
                     <img src="{% site_image_url 'home_menu_2' 'img/section-placeholder.jpg' %}"
                         alt="{% site_image_alt 'home_menu_2' 'Gericht 2' %}"
                         class="rounded-img">
                </div>
            </div>
        </div>
    </div>
</section>

<!-- ========== CATERING - HTML FÜR RESPONSIVEN SLIDER ERWEITERT ========== -->
<section class="section section-light">
    <div class="container section-center">
        <h2 class="section-title">Unser Catering</h2>
        <h3 class="section-kicker green">Verwöhnt mit koreanischen Köstlichkeiten</h3>
        <p>Ihr Meeting oder Ihre Konferenz dauert etwas länger und der Magen knurrt? Wie wäre es mit gesundem, leckerem koreanischen Essen?</p>
        <p>Dann lassen Sie sich doch von uns etwas liefern!</p>
        <a href="{% url 'catering' %}" class="btn btn-primary">Hier geht es zum Catering!</a>
    </div>

    <!-- Container für Desktop (4-Spalten) und Tablet (2x2-Grid) -->
    <div class="container gallery-row" id="cateringGalleryDesktop">
        <img src="{% site_image_url 'home_catering_1' 'img/section-placeholder.jpg' %}" class="rounded-img">
        <img src="{% site_image_url 'home_catering_2' 'img/section-placeholder.jpg' %}" class="rounded-img">
        <img src="{% site_image_url 'home_catering_3' 'img/section-placeholder.jpg' %}" class="rounded-img">
        <img src="{% site_image_url 'home_catering_4' 'img/section-placeholder.jpg' %}" class="rounded-img">
    </div>

    <!-- NEUER BEREICH: Catering für Mobile (Slider) -->
    <div class="container">
        <div class="catering-mobile-slider" id="cateringSlider">
            <div class="catering-slider-track" id="cateringSliderTrack">
                <!-- Die 4 Bilder als Slider-Elemente -->
                <div class="catering-slide-item">
                    <img src="{% site_image_url 'home_catering_1' 'img/section-placeholder.jpg' %}" class="rounded-img">
                </div>
                <div class="catering-slide-item">
                    <img src="{% site_image_url 'home_catering_2' 'img/section-placeholder.jpg' %}" class="rounded-img">
                </div>
                <div class="catering-slide-item">
                    <img src="{% site_image_url 'home_catering_3' 'img/section-placeholder.jpg' %}" class="rounded-img">
                </div>
                <div class="catering-slide-item">
                    <img src="{% site_image_url 'home_catering_4' 'img/section-placeholder.jpg' %}" class="rounded-img">
                </div>
            </div>
        </div>
    </div>
</section>

<!-- ========== KUNDENSTIMMEN (Testimonials) ========== -->
<section class="section testimonials-section">
    <div class="testimonials-bg">
        <img src="{% site_image_url 'home_testimonials_bg' 'img/section-placeholder.jpg' %}"
             alt="{% site_image_alt 'home_testimonials_bg' 'Kundenstimmen Hintergrund' %}">
    </div>

    <!-- Overlay Container -->
    <div class="testimonials-overlay">
        <h2 class="section-title" style="color: #fff; margin-bottom: 2rem;">Kundenstimmen</h2>

        <div class="testimonial-slider-container">
            <div class="ts-slide active">
                "Wir haben gestern soooo lecker gegessen wie schon lang nicht mehr. Die Gerichte sind sehr schmackhaft und es bietet sich auch für Kinder an, denn es werden Kinder Menüs angeboten. Wir kommen wieder!"
                <br><span class="ts-author">- Afrodite T. -</span>
            </div>
            <div class="ts-slide">
                "Sehr freundliche Bedienung und leckere Speisen und der Chapchae Bulgogi war köstlich. Maximale Empfehlung!"
                <br><span class="ts-author">- Daniel B. -</span>
            </div>
            <div class="ts-slide">
                "Wir haben uns kürzlich zur Jahresabschlussfeier von Korean BBQ Grill verköstigen lassen. Super organisiert, super zuverlässig und mega lecker. Absolut empfehlenswert."
                <br><span class="ts-author">- Silvio R. -</span>
            </div>
        </div>
    </div>
</section>


<!-- ========== STYLES (Aktualisiert für Responsive Design) ========== -->
<style>
    /* --- SYSTEM FARBE --- */
    :root {
        --kbg-green: #007755;
        --kbg-orange: #f5821f;
    }
    .btn-primary { background-color: var(--kbg-green) !important; border-color: var(--kbg-green) !important; }
    .section-kicker { color: var(--kbg-green) !important; }
    .section-kicker.green { color: var(--kbg-green) !important; }

    /* --- HERO SECTION (KORREKTUREN) --- */
    .hero-section {
        position: relative;
        height: 600px;
        overflow: hidden;
    }

    .hero-bg {
        position: absolute;
        inset: 0;
        z-index: 0;
    }

    /* KORREKTUR 1: Bild füllt immer aus, kein weißer Rand */
    .hero-bg img {
        width: 100%;
        height: 100%;
        object-fit: cover; /* Stellt sicher, dass das Bild gecroppt wird und die Fläche füllt */
    }

    /* KORREKTUR 2: Textzentrierung mit Flexbox */
    .hero-overlay {
        position: absolute;
        inset: 0;
        z-index: 1;
        background: rgba(0,0,0,0.1); /* Leichtes Overlay, um Text lesbar zu halten */
        display: flex;
        flex-direction: column;
        justify-content: center; /* Vertikal zentriert */
        align-items: center;     /* Horizontal zentriert */
        color: #fff;
        text-align: center;
    }

    .hero-text-julee {
        font-family: 'Julee', cursive;
        font-size: 64px;
        margin: 0.2rem 0;
        line-height: 1.2;
    }
    .hero-text-korean {
        font-family: 'Outfit', sans-serif;
        font-size: 64px;
        color: var(--kbg-orange);
        margin: 0.2rem 0;
        font-weight: 700;
    }
    .hero-text-pronounce {
        font-family: 'Julee', cursive;
        font-size: 24px;
        color: var(--kbg-orange);
        margin-bottom: 1rem;
    }

    /* Anpassung der HERO-Typographie für kleinere Bildschirme (md: 768px) */
    @media (max-width: 48rem) { /* < 768px */
        .hero-section { height: 450px; }
        /* ca. 30 % größer als vorher (36px → 48px, 18px → 24px) */
        .hero-text-julee, .hero-text-korean { font-size: 48px; }
        .hero-text-pronounce { font-size: 24px; }
    }


    /* --- SLIDER "WER WIR SIND" (SLIDING) --- */
    /* ... (Unverändert gelassen) ... */
    .about-slider-window {
        overflow: hidden;
        position: relative;
        border-radius: 12px;
        aspect-ratio: 3/2;
    }
    .about-slider-track {
        display: flex;
        width: 200%;
        height: 100%;
        transition: transform 0.8s ease-in-out;
    }
    .about-slide-item {
        width: 50%;
        height: 100%;
        flex-shrink: 0;
    }
    .about-slide-item img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        display: block;
    }


    /* --- MENÜ SPLIT LAYOUT (RESPONSIV) --- */
    /* Desktop (>= 64rem / 1024px) - 25/50/25 Split */
    .menu-split-layout {
        display: none;
    }
    @media (width >= 64rem) {
        .menu-split-layout {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 2rem;
            padding-top: 2rem;
            padding-bottom: 2rem;
        }
        .menu-side-img {
            flex: 1;
            display: flex;
            justify-content: center;
        }
        .menu-center-text {
            flex: 2;
            padding: 0 1rem;
        }
        .menu-responsive-container {
            display: none;
        }
    }

    /* Desktop-Bilder links/rechts:
       etwas schmaler als die Spalte -> wirken wie beim Catering im Container */
    .full-height-img {
        width: 100%;          /* volle Spaltenbreite -> direkt am lila Rand */
        aspect-ratio: 1 / 1;  /* weiterhin quadratisch */
        object-fit: cover;
        display: block;
        /* max-width entfernt */
    }

    /* Standard: Responsive-Container ausblenden,
       wird in den Media Queries wieder aktiviert */
    .menu-responsive-container {
        display: none;
    }

    /* Tablet (>= 40rem / 640px und < 64rem / 1024px)
       -> 2 Bilder teilen sich die Breite sauber im Container (wie Catering-Grid) */
    @media (width >= 40rem) and (max-width: 63.99rem) {
        .menu-split-layout { display: none; }
        .menu-responsive-container { display: block; }

        .menu-mobile-slider {
            margin-top: 2rem;
        }

        .menu-slider-track {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1.5rem;
            width: 100%;
            transform: none !important; /* keine Slider-Animation im Tablet-Layout */
        }

        .menu-slide-item {
            width: 100%;
        }

        .menu-slide-item img {
            width: 100%;
            aspect-ratio: 1 / 1;
            object-fit: cover;
            display: block;
        }
    }

    /* Mobile (< 40rem / 640px) - Text über Slider
       -> Slider bleibt, aber Bilder werden nicht quadratisch erzwungen */
    @media (max-width: 39.99rem) {
        .menu-split-layout { display: none; }
        .menu-responsive-container { display: block; }

        .menu-mobile-slider {
            position: relative;
            overflow: hidden;
            margin-top: 2rem;
            border-radius: 12px;
        }
        .menu-slider-track {
            display: flex;
            width: 200%; /* 2 Slides */
            transition: transform 0.5s ease-in-out;
        }
        .menu-slide-item {
            width: 50%;
            flex-shrink: 0;
        }
        .menu-slide-item img {
            width: 100%;
            height: auto;   /* natürliche Höhe, kein Abschneiden */
            object-fit: cover;
            display: block;
        }
    }


    /* --- CATERING GALERIE (RESPONSIV) --- */

    /* Desktop (>= 64rem / 1024px) - 4 Spalten */
    .gallery-row {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 1.5rem;
        margin-top: 3rem;
    }
    .catering-mobile-slider { display: none; }


    /* Tablet (>= 40rem / 640px) und (< 64rem / 1024px) - 2x2 Grid */
    @media (width >= 40rem) and (max-width: 63.99rem) {
        .gallery-row {
            grid-template-columns: repeat(2, 1fr);
        }
    }


    /* Mobile (< 40rem / 640px) - Slider */
    @media (max-width: 39.99rem) {
        .gallery-row { display: none; }

        .catering-mobile-slider {
            display: block;
            position: relative;
            overflow: hidden;
            height: 250px;
            margin-top: 3rem;
            border-radius: 12px;
        }
        .catering-slider-track {
            display: flex;
            width: 400%;
            height: 100%;
            transition: transform 0.5s ease-in-out;
        }
        .catering-slide-item {
            width: 25%;
            height: 100%;
            flex-shrink: 0;
        }
        .catering-slide-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
    }


    /* --- KUNDENSTIMMEN (KORREKTUREN) --- */
    .testimonials-section {
        position: relative;
        /* KORREKTUR: Höhe erhöht */
        height: 400px;
        padding: 0 !important;
        overflow: hidden;
    }

    .testimonials-bg {
        position: absolute;
        inset: 0;
        z-index: 0;
    }

    .testimonials-bg img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        object-position: center center;
    }

    .testimonials-overlay {
        position: absolute;
        inset: 0;
        z-index: 1;
        background: linear-gradient(to bottom, rgba(0,0,0,0.4), rgba(0,0,0,0.6));
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        padding: 0 1.5rem;
    }

    .testimonial-slider-container {
        width: 100%;
        max-width: 800px;
        /* KORREKTUR: Höhe erhöht */
        height: 200px;
        position: relative;
        overflow: hidden;
    }

    .ts-slide {
        /* ... (Restliche Slider-Regeln unverändert) ... */
        position: absolute;
        width: 100%;
        top: 0;
        left: 100%;
        opacity: 0;
        transition: left 1s ease-in-out, opacity 1s ease-in-out;
        font-size: 1.25rem;
        line-height: 1.6;
        font-weight: 500;
        color: #fff;
        text-align: center;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
    }
    .ts-author {
        display: block;
        margin-top: 1rem;
        font-weight: 700;
        color: var(--kbg-orange);
    }
    .ts-slide.active { left: 0; opacity: 1; }
    .ts-slide.exit-left { left: -100%; opacity: 0; }

    /* "Wer wir sind" – immer mittig zentrieren (alle Größen) */
    #about-section .two-column {
        text-align: center;
        justify-content: center;
        align-items: center;
    }
    #about-section .two-column .col {
        max-width: 700px;
        margin-left: auto;
        margin-right: auto;
    }

</style>


<!-- ========== SCRIPTS (Optimiert für Robustheit) ========== -->
<script>
document.addEventListener("DOMContentLoaded", function() {

    // Helper-Funktion für alle automatischen Slider
    function initAutoSlider(trackId, slideCount, intervalTime) {
        const track = document.getElementById(trackId);
        // Prüft, ob der Track existiert und die CSS-Regeln für Sliding greifen (z.B. width: 200%/400%)
        if (!track) return;

        let currentSlide = 0;
        const totalSlides = slideCount;
        const slideWidthPercentage = 100 / totalSlides;

        function nextSlide() {
            // Nur sliden, wenn der Track tatsächlich breiter als 100% ist (Mobile-Modus)
            // Die Laufzeitprüfung hier ist schwierig, daher vertrauen wir auf das Intervall im Hintergrund
            currentSlide = (currentSlide + 1) % totalSlides;
            const transformValue = -currentSlide * slideWidthPercentage;
            track.style.transform = `translateX(${transformValue}%)`;
        }

        // Startet das Interval
        // HINWEIS: Wir starten das Intervall immer, die CSS Media Query verhindert den Effekt,
        // wenn die Breite des Tracks auf 100% gesetzt ist (Tablet/Desktop).
        setInterval(nextSlide, intervalTime);
    }

    // 1. SLIDER "WER WIR SIND" (Schiebe-Effekt / Slide) - Unverändert
    const aboutTrack = document.getElementById('aboutSliderTrack');
    if(aboutTrack) {
        let isSlide1 = true;
        setInterval(() => {
            if(isSlide1) {
                aboutTrack.style.transform = "translateX(-50%)";
            } else {
                aboutTrack.style.transform = "translateX(0%)";
            }
            isSlide1 = !isSlide1;
        }, 5000);
    }


    // 2. MENÜ MOBILE SLIDER (NEU & ROBUST)
    // Wird immer initialisiert, aber nur im Mobile-Modus (< 640px) sliden die Bilder tatsächlich durch die CSS-Breite des Tracks.
    initAutoSlider('menuSliderTrack', 2, 2000); // 2 Slides, alle 2 Sekunden


    // 3. CATERING MOBILE SLIDER (NEU & ROBUST)
    // Wird immer initialisiert, aber nur im Mobile-Modus (< 640px) sliden die Bilder tatsächlich durch die CSS-Breite des Tracks.
    initAutoSlider('cateringSliderTrack', 4, 2000); // 4 Slides, alle 2 Sekunden


    // 4. TESTIMONIAL TEXT SLIDER - Unverändert
    const tsSlides = document.querySelectorAll('.ts-slide');
    if (tsSlides.length > 0) {
        let currentTs = 0;

        function showTsSlide(index) {
            tsSlides.forEach((slide, i) => {
                slide.classList.remove('active', 'exit-left');
                if (i === currentTs) slide.classList.add('exit-left');
                if (i === index) slide.classList.add('active');
            });
            currentTs = index;
        }

        function nextTsSlide() {
            const nextIndex = (currentTs + 1) % tsSlides.length;
            showTsSlide(nextIndex);
        }
        setInterval(nextTsSlide, 6000);
    }
});
</script>

{% endblock %}